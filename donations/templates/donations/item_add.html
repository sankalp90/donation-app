{% extends 'donations/base.html' %}
{% block content %}

<h2 class="text-xl font-bold mb-4">Donate an Item</h2>

<form method="POST" enctype="multipart/form-data" class="space-y-4">
    {% csrf_token %}
    {{ form.as_p }}

    <p class="font-semibold">Pick location:</p>
    <div id="map" class="w-full h-80 mb-3"></div>

    <button class="px-4 py-2 bg-green-600 text-white rounded">
        Submit
    </button>
</form>

<script>
var map = L.map('map').setView([20.5, 78.9], 5);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png')
    .addTo(map);

var marker;

map.on('click', function(e) {
    if (marker) map.removeLayer(marker);

    marker = L.marker(e.latlng).addTo(map);

    document.getElementById('id_latitude').value = e.latlng.lat;
    document.getElementById('id_longitude').value = e.latlng.lng;
});
</script>

{% endblock %}
