{% extends "donations/base.html" %}

{% block content %}
<h2 class="text-2xl font-bold mb-6 text-gray-800">Available Items</h2>

{% if items %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for item in items %}
    <div class="bg-white rounded shadow p-4 flex flex-col">
        {% if item.image %}
            <img src="{{ item.image.url }}" alt="{{ item.title }}" class="w-full h-48 object-cover rounded mb-4">
        {% endif %}
        <h3 class="text-xl font-semibold mb-2">{{ item.title }}</h3>
        <p class="mb-2"><strong>Category:</strong> {{ item.get_category_display }}</p>
        <p class="mb-2"><strong>Condition:</strong> {{ item.condition }}</p>
        <p class="mb-4"><strong>Donor:</strong> {{ item.donor.username }}</p>

        <div class="mt-auto flex flex-wrap gap-2">
            <a href="{% url 'item_detail' pk=item.id %}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors">
                View Details
            </a>

            {% if user.is_authenticated %}
                {% if not item.is_claimed %}
                    <a href="{% url 'request_item' pk=item.id %}" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors">
                        Request Item
                    </a>
                {% else %}
                    <span class="bg-gray-400 text-white px-4 py-2 rounded cursor-not-allowed">Claimed</span>
                {% endif %}
            {% else %}
                <a href="{% url 'login' %}" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors">
                    Login to Request
                </a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<p class="text-gray-700">No items available at the moment.</p>
{% endif %}
{% endblock %}
